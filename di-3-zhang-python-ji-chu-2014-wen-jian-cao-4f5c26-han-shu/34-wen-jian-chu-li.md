## 本节重点：

* 使学生掌握文件的读、写、修改方法
* 掌握文件处理模式的区别

> **本节时长需控制在40分钟内**

## 引子

1.问题：给你一个文件 "兼职白领学生空姐模特护士联系方式.txt" ，如何查看内容？

答：

1. 安装文本编辑器软件
2. 选中右键，利用文本编辑器软件打开
3. 查看 or  写入
4. 保存，关闭

> PS: 看到居然还有xxx的女朋友 或 美好的事物应该分享，默默的把xxx的女朋友电话也写进去

1. 问题：文件在硬盘上是如何存储？

答：以某种编码格式的 “010101010101001” 保存在硬盘上。

1. 问题：假定世上无文本编辑器软件，如何使用Python对文件进行操作？

答：请看下面

## Python处理文件

文件操作分为读、写、修改，我们先从读开始学习

#### 读文件 

**示例1：**

```
f = open(file='D:/工作日常/兼职白领学生空姐模特护士联系方式.txt',mode='r',encoding='utf-8')

data = f.read()

f.close()
```

上述操作语法解释：

```
file='D:/工作日常/兼职白领学生空姐模特护士联系方式.txt'  表示文件路径
mode='r'                                          表示只读（可以修改为其他）
encoding='utf-8'                                  表示将硬盘上的 0101010 按照utf-8的规则去“断句”，再将“断句”后的每一段0101010转换成unicode的 01010101，unicode对照表中有01010101和字符的对应关系。
f.read()                                          表示读取所有内容，内容是已经转换完毕的字符串。
f.close()                                         表示关闭文件
```

> PS: 此处的encoding必须和文件在保存时设置的编码一致，不然“断句”会不准确从而造成乱码。



**示例2：**

```
f = open(file='D:/工作日常/兼职白领学生空姐模特护士联系方式.txt',mode='rb')
data = f.read()
f.close()
```

上述操作语法解释：

```
file='D:/工作日常/兼职白领学生空姐模特护士联系方式.txt'      表示文件路径
mode='rb'                                            表示只读（可以修改为其他）
f.read()                                             表示读取所有内容，内容是硬盘上原来以某种编码保存的 010101010，即：某种编码格式的字节类型
f.close()                                            表示关闭文件
```

问：示例2和示例1的区别在哪？

答：在于示例2打开文件时并未指定encoding,这是为何？是因为直接以rb模式打开了文件 ，rb是指二进制模式，数据读到内存里直接是bytes格式，如果想内容，还需要手动decode,因此在文件打开阶段，不需要指定编码

问：假如你不知道你要处理的文件是什么编码可怎么办呢？

```
import chardet

f = open('log',mode='rb')
data = f.read()
f.close()

result = chardet.detect(open('log',mode='rb').read())
print(result)

```

输出：

```
{'encoding': 'GB2312', 'confidence': 0.99, 'language': 'Chinese'}
```

> **注意：**
>
> * 文件操作时，以 “r”或“rb” 模式打开，则只能读，无法写入；
> * 硬盘上保存的文件都是某种编码的0101010，打开时需要注意：
>   *  rb，直接读取文件保存时原生的0101010，在Python中用字节类型表示
>   * r和encoding，读取硬盘的0101010，并按照encoding指定的编码格式进行断句，再将“断句”后的每一段0101010转换成unicode的 010101010101，在Python中用字符串类型表示

#### 

#### 写文件 

```
f = open(file='D:/工作日常/兼职白领学生空姐模特护士联系方式.txt',mode='w',encoding='utf-8')
f.write('北大本科美国留学一次50，微信号：xxxxx')
f.close()
```

上术操作语法解释：

```
- file='D:/工作日常/兼职白领学生空姐模特护士联系方式.txt'       表示文件路径
- mode='w'                                             表示只写
- encoding='utf-8'                                     将要写入的unicode字符串编码成utf-8格式
- f.write(...)                                         表示写入内容，写入的内容是unicode字符串类型，内部会根据encoding转换为制定编码的 01101010101，即：字节类型
- f.close() 
```



